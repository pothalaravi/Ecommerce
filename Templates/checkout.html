{% extends "theme.html" %}
{% block main %}

<div class="container my-5">
  <h2>Checkout</h2>

  {% if cart_items %}
  <table class="table table-bordered mt-4">
    <thead>
      <tr>
        <th>Product</th>
        <th>Image</th>
        <th>Price</th>
        <th>Qty</th>
        <th>Total</th>
      </tr>
    </thead>
    <tbody>
      {% for item in cart_items %}
      <tr>
        <td>{{ item.product.name }}</td>
        <td>
          <img src="{{ item.product.image.url }}" width="80" height="80" style="object-fit: cover;" />
        </td>
        <td>â‚¹{{ item.product.price }}</td>
        <td>{{ item.quantity }}</td>
        <td>â‚¹{{ item.item_total }}</td>
      </tr>
      {% endfor %}
      <tr>
        <td colspan="4" class="text-end"><strong>Grand Total</strong></td>
        <td><strong>â‚¹{{ total }}</strong></td>
      </tr>
    </tbody>
  </table>

  <!-- ðŸŸ¢ Address Form Added Below -->
  <div class="mt-5">
    <h4>Shipping Address</h4>
    <form method="POST" action="{% url 'confirm_order' %}">
      {% csrf_token %}
      <div class="mb-3">
        <label class="form-label">Full Address</label>
        <textarea name="address" class="form-control" placeholder="Enter full address" required></textarea>
      </div>

      <div class="mb-3">
        <label class="form-label">City</label>
        <input type="text" name="city" class="form-control" placeholder="Enter city" required />
      </div>

      <div class="mb-3">
        <label class="form-label">Pincode</label>
        <input type="text" name="pincode" class="form-control" placeholder="Enter pincode" required />
      </div>

      <div class="text-end mt-4">
        <button type="submit" class="btn btn-success btn-lg">
          <i class="fa fa-check-circle me-2"></i> Confirm Order
        </button>
      </div>
    </form>
  </div>

  {% else %}
  <p>No items in your cart.</p>
  {% endif %}
</div>

{% endblock %}
